<?xml version="1.0" encoding="UTF-8"?>
<Export generator="Cache" version="25">
<Class name="Forum.Forum">
<Description>
Class of objects
Object of this class are cathegories from forum with next properties
ForumName - name of cathegory
Address - piece of URL; like cache/, oracle/, mysql/
Topics - Amount of topics of cathegory</Description>
<Super>%Persistent</Super>
<TimeCreated>63770,69486.949772</TimeCreated>

<Parameter name="SERVER">
<Default>www.sql.ru</Default>
</Parameter>

<Parameter name="FORUM">
<Default>/forum/</Default>
</Parameter>

<Property name="Topics">
<Type>Forum.Topic</Type>
<Cardinality>many</Cardinality>
<Inverse>Forum</Inverse>
<Relationship>1</Relationship>
</Property>

<Property name="ForumName">
<Type>%String</Type>
<Required>1</Required>
</Property>

<Index name="ForumNameIndex">
<Properties>ForumName</Properties>
<Unique>1</Unique>
</Index>

<Property name="Address">
<Type>%String</Type>
<Required>1</Required>
</Property>

<Index name="AddressIndex">
<Properties>Address</Properties>
<Unique>1</Unique>
</Index>

<Property name="TopicsNum">
<Type>%Integer</Type>
<Required>1</Required>
</Property>

<Method name="Load">
<Description>
Load cathegory, then load topics of cathegory 
Repeat </Description>
<ClassMethod>1</ClassMethod>
<FormalSpec>cathegoryURL:%String="cache/"</FormalSpec>
<Implementation><![CDATA[

	;#For time we will have in properties of this class only this data
	s tmpData = ..%New()
	s tmpData.ForumName = "Cache"
	s tmpData.Address = cathegoryURL
	s tmpData.TopicsNum = 3277
	d tmpData.%Save()
	s forumId = tmpData.%Id()
	k tmpData
	
	d ##class(Forum.Topic).TopicLoad(cathegoryURL, forumId)
	Q
]]></Implementation>
</Method>

<Storage name="Default">
<Type>%Library.CacheStorage</Type>
<DataLocation>^Forum.ForumD</DataLocation>
<DefaultData>ForumDefaultData</DefaultData>
<IdLocation>^Forum.ForumD</IdLocation>
<IndexLocation>^Forum.ForumI</IndexLocation>
<StreamLocation>^Forum.ForumS</StreamLocation>
<Data name="ForumDefaultData">
<Value name="1">
<Value>%%CLASSNAME</Value>
</Value>
<Value name="2">
<Value>ForumName</Value>
</Value>
<Value name="3">
<Value>Address</Value>
</Value>
<Value name="4">
<Value>TopicsNum</Value>
</Value>
</Data>
</Storage>
</Class>
</Export>
